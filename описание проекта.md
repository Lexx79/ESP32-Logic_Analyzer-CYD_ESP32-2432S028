# Проект: Логический анализатор для ESP32 (CYD)

**Версия: 1.2**

## Описание

Прошивка превращает плату **ESP32-2432S028 (Cheap Yellow Display)** в простой двухканальный логический анализатор с сенсорным управлением. Проект был разработан и итерационно улучшен для захвата и анализа цифровых сигналов, в частности, для отладки протоколов типа NEC от ИК-пультов.

## Аппаратная часть

*   **Плата:** ESP32-2432S028 "Cheap Yellow Display"
*   **Канал 1 (CH1):** GPIO 22
*   **Канал 2 (CH2):** GPIO 27 (разъем CN1)
    *   *Примечание: GPIO 35 (разъем P3) также может быть использован для CH2, но в некоторых случаях может быть неисправен.*

## Функционал

*   **Два канала:** Захват и отображение двух независимых цифровых сигналов.
*   **Сенсорный интерфейс:** Все управление осуществляется через 4 основные кнопки и 2 дополнительные кнопки сдвига.
*   **Режимы триггера:**
    *   `AUTO`: Непрерывный захват без синхронизации.
    *   `FALL`: Непрерывный захват с синхронизацией по спадающему фронту на CH1 или CH2.
    *   `RISE`: Непрерывный захват с синхронизацией по нарастающему фронту на CH1 или CH2.
    *   `SINGLE`: Однократный захват по спадающему фронту на CH1 или CH2. Идеально подходит для захвата непериодических сигналов (например, от пульта ДУ).
*   **Управление временем:** Кнопки `T-` и `T+` позволяют гибко настраивать время захвата (от 0 до 4000 µs на семпл).
*   **Анализ захваченного сигнала:**
    *   В режиме `SINGLE` после захвата (на "паузе") можно детально изучить сигнал.
    *   **Масштабирование:** Кнопки `T-` и `T+` позволяют "приближать" и "отдалять" сигнал, при этом значение времени `T:us` на экране автоматически пересчитывается.
    *   **Сдвиг:** Дополнительные кнопки `<-` и `->` появляются на паузе и позволяют сдвигать область просмотра по всему буферу захвата (2048 семплов).
*   **Отрисовка:** Сигналы отрисовываются в виде четких прямоугольных импульсов для удобства анализа.
*   **Заставка:** При включении отображается начальная заставка с названием и версией ПО.

## Как пользоваться

1.  **Выберите режим `TRIG`:** Кнопкой `TRIG` выберите нужный режим. Для захвата сигнала с пульта используйте `SINGLE`.
2.  **Настройте время `T-`/`T+`:** Установите желаемое базовое время захвата. Для ИК-сигналов хорошо подходит значение около 50us.
3.  **Захват:**
    *   В режиме `SINGLE` нажмите зеленую кнопку `ARM`. Устройство перейдет в режим ожидания `WAITING...`. Подайте сигнал на вход CH1 или CH2. После захвата он автоматически "заморозится".
    *   В непрерывных режимах (`AUTO`, `FALL`, `RISE`) захват идет постоянно.
4.  **Анализ (при паузе):**
    *   Используйте `T-`/`T+` для изменения масштаба.
    *   Используйте `<-`/`->` для сдвига по осциллограмме.
    *   Чтобы произвести новый замер (в `SINGLE`) или возобновить работу (в `AUTO`/`FALL`/`RISE`), снова нажмите `ARM` / `RUN`.

---
### История версий

*   **v1.2 (10.01.2026):**
    *   Добавлена начальная заставка при включении устройства. Код реорганизован с использованием заголовочных файлов.
*   **v1.1:**
    *   Начальная стабильная версия. Реализован весь основной функционал.